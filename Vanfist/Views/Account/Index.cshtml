@{
	ViewData["Title"] = "Profile";
	var account = ViewBag.Account;
	var isLoggedIn = (bool?)ViewBag.IsLoggedIn == true;
}

<link rel="stylesheet" href="~/css/account.css" asp-append-version="true" />

<div class="container my-4">
	@if (!isLoggedIn || account == null)
	{
		<div class="alert alert-warning">You are not logged in. Please <a asp-controller="Auth" asp-action="Login">log in</a>.</div>
	}
	else
	{
		var initial = string.IsNullOrWhiteSpace((string)account.FirstName) ? "U" : ((string)account.FirstName).Substring(0,1).ToUpperInvariant();
		<div class="row g-4">
			<div class="col-12 col-lg-3">
				<div class="card shadow-sm mb-3">
					<div class="card-body d-flex align-items-center">
						<div class="avatar-circle me-3">@initial</div>
						<div>
							<div class="text-muted">Hello,</div>
							<div class="fw-semibold">@account.FirstName @account.LastName</div>
						</div>
					</div>
				</div>

				<div class="card shadow-sm">
					<div class="card-header bg-white fw-semibold">Car info</div>
					<ul class="list-group list-group-flush small">
						<li class="list-group-item d-flex align-items-center">My Car</li>
					</ul>
				</div>

				<div class="card shadow-sm mt-3">
					<div class="card-header bg-white fw-semibold">Orders and Services</div>
					<ul class="list-group list-group-flush small">
						<li class="list-group-item">Transaction History</li>
						<li class="list-group-item">Maintenance - Repairs</li>
						<li class="list-group-item">Battery Leasing</li>
						<li class="list-group-item">Charging History</li>
					</ul>
				</div>
				
				<div class="card shadow-sm mt-3">
					<div class="card-header bg-white fw-semibold">Account</div>
					<ul class="list-group list-group-flush small">
						<li class="list-group-item">
							<form asp-controller="Account" asp-action="Index" method="get">
								<button type="submit" class="btn btn-link p-0 text-decoration-none">Personal Information</button>
							</form>
						</li>
						<li class="list-group-item">Support Request</li>
						<li class="list-group-item">Contact</li>
						<li class="list-group-item">
							<form asp-controller="Auth" asp-action="Logout" method="post" class="m-0 p-0">
								<button type="submit" class="btn btn-link p-0 text-decoration-none">Logout</button>
							</form>
						</li>
					</ul>
				</div>
			</div>

			<div class="col-12 col-lg-9">
				<div class="card shadow-sm">
					<div class="card-header bg-white d-flex justify-content-between align-items-center">
						<div class="fw-semibold">Profile</div>
						<a href="#" class="small">Edit profile</a>
					</div>
					<div class="card-body">
						<div class="row g-3">
							<div class="col-12 col-md-6">
								<div class="text-muted small">Full Name</div>
								<div class="fw-semibold">@account.FirstName @account.LastName</div>
							</div>
							<div class="col-12 col-md-6">
								<div class="text-muted small">Email</div>
								<div class="fw-semibold">@account.Email</div>
							</div>
							<div class="col-12 col-md-6">
								<div class="text-muted small">Phone Number</div>
								<div class="fw-semibold">@account.Number</div>
							</div>
						</div>

						<hr class="my-4"/>

						<div class="d-flex justify-content-between align-items-center">
							<div class="text-muted small">Password</div>
							<a href="#" class="small">Change password</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	}
</div>

@section Scripts {
	@{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}